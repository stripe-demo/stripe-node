/**
 * This file was auto-generated by Fern from our API Definition.
 */

/**
 * @example
 *     {
 *         currency: "currency",
 *         line_items: [{
 *                 amount: 1
 *             }]
 *     }
 */
export interface CalculationCreateRequest {
    /** Three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html), in lowercase. Must be a [supported currency](https://stripe.com/docs/currencies). */
    currency: string;
    /** The ID of an existing customer to use for this calculation. If provided, the customer's address and tax IDs are copied to `customer_details`. */
    customer?: string;
    /** Details about the customer, including address and tax IDs. */
    customer_details?: CalculationCreateRequest.CustomerDetails;
    /** Specifies which fields in the response should be expanded. */
    expand?: string[];
    /** A list of items the customer is purchasing. */
    line_items: CalculationCreateRequest.LineItems.Item[];
    /** Details about the address from which the goods are being shipped. */
    ship_from_details?: CalculationCreateRequest.ShipFromDetails;
    /** Shipping cost details to be used for the calculation. */
    shipping_cost?: CalculationCreateRequest.ShippingCost;
    /** Timestamp of date at which the tax rules and rates in effect applies for the calculation. Measured in seconds since the Unix epoch. Can be up to 48 hours in the past, and up to 48 hours in the future. */
    tax_date?: number;
}

export namespace CalculationCreateRequest {
    /**
     * Details about the customer, including address and tax IDs.
     */
    export interface CustomerDetails {
        /** The customer's postal address (for example, home or business location). */
        address?: CustomerDetails.Address;
        /** The type of customer address provided. */
        address_source?: CustomerDetails.AddressSource;
        /** The customer's IP address (IPv4 or IPv6). */
        ip_address?: string;
        /** The customer's tax IDs. Stripe Tax might consider a transaction with applicable tax IDs to be B2B, which might affect the tax calculation result. Stripe Tax doesn't validate tax IDs for correctness. */
        tax_ids?: CustomerDetails.TaxIds.Item[];
        /** Overrides the tax calculation result to allow you to not collect tax from your customer. Use this if you've manually checked your customer's tax exemptions. Prefer providing the customer's `tax_ids` where possible, which automatically determines whether `reverse_charge` applies. */
        taxability_override?: CustomerDetails.TaxabilityOverride;
    }

    export namespace CustomerDetails {
        /**
         * The customer's postal address (for example, home or business location).
         */
        export interface Address {
            /** City, district, suburb, town, or village. */
            city?: Address.City;
            /** Two-letter country code ([ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)). */
            country: string;
            /** Address line 1 (e.g., street, PO Box, or company name). */
            line1?: Address.Line1;
            /** Address line 2 (e.g., apartment, suite, unit, or building). */
            line2?: Address.Line2;
            /** ZIP or postal code. */
            postal_code?: Address.PostalCode;
            /** State, county, province, or region. We recommend sending [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) subdivision code value when possible. */
            state?: Address.State;
        }

        export namespace Address {
            /**
             * City, district, suburb, town, or village.
             */
            export type City = string | "";
            /**
             * Address line 1 (e.g., street, PO Box, or company name).
             */
            export type Line1 = string | "";
            /**
             * Address line 2 (e.g., apartment, suite, unit, or building).
             */
            export type Line2 = string | "";
            /**
             * ZIP or postal code.
             */
            export type PostalCode = string | "";
            /**
             * State, county, province, or region. We recommend sending [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) subdivision code value when possible.
             */
            export type State = string | "";
        }

        /**
         * The type of customer address provided.
         */
        export type AddressSource = "billing" | "shipping";
        export const AddressSource = {
            Billing: "billing",
            Shipping: "shipping",
        } as const;
        export type TaxIds = TaxIds.Item[];

        export namespace TaxIds {
            export interface Item {
                /** Type of the tax ID, one of `ad_nrt`, `ae_trn`, `al_tin`, `am_tin`, `ao_tin`, `ar_cuit`, `au_abn`, `au_arn`, `ba_tin`, `bb_tin`, `bg_uic`, `bh_vat`, `bo_tin`, `br_cnpj`, `br_cpf`, `bs_tin`, `by_tin`, `ca_bn`, `ca_gst_hst`, `ca_pst_bc`, `ca_pst_mb`, `ca_pst_sk`, `ca_qst`, `cd_nif`, `ch_uid`, `ch_vat`, `cl_tin`, `cn_tin`, `co_nit`, `cr_tin`, `de_stn`, `do_rcn`, `ec_ruc`, `eg_tin`, `es_cif`, `eu_oss_vat`, `eu_vat`, `gb_vat`, `ge_vat`, `gn_nif`, `hk_br`, `hr_oib`, `hu_tin`, `id_npwp`, `il_vat`, `in_gst`, `is_vat`, `jp_cn`, `jp_rn`, `jp_trn`, `ke_pin`, `kh_tin`, `kr_brn`, `kz_bin`, `li_uid`, `li_vat`, `ma_vat`, `md_vat`, `me_pib`, `mk_vat`, `mr_nif`, `mx_rfc`, `my_frp`, `my_itn`, `my_sst`, `ng_tin`, `no_vat`, `no_voec`, `np_pan`, `nz_gst`, `om_vat`, `pe_ruc`, `ph_tin`, `ro_tin`, `rs_pib`, `ru_inn`, `ru_kpp`, `sa_vat`, `sg_gst`, `sg_uen`, `si_tin`, `sn_ninea`, `sr_fin`, `sv_nit`, `th_vat`, `tj_tin`, `tr_tin`, `tw_vat`, `tz_vat`, `ua_vat`, `ug_tin`, `us_ein`, `uy_ruc`, `uz_tin`, `uz_vat`, `ve_rif`, `vn_tin`, `za_vat`, `zm_tin`, or `zw_tin` */
                type: Item.Type;
                /** Value of the tax ID. */
                value: string;
            }

            export namespace Item {
                /**
                 * Type of the tax ID, one of `ad_nrt`, `ae_trn`, `al_tin`, `am_tin`, `ao_tin`, `ar_cuit`, `au_abn`, `au_arn`, `ba_tin`, `bb_tin`, `bg_uic`, `bh_vat`, `bo_tin`, `br_cnpj`, `br_cpf`, `bs_tin`, `by_tin`, `ca_bn`, `ca_gst_hst`, `ca_pst_bc`, `ca_pst_mb`, `ca_pst_sk`, `ca_qst`, `cd_nif`, `ch_uid`, `ch_vat`, `cl_tin`, `cn_tin`, `co_nit`, `cr_tin`, `de_stn`, `do_rcn`, `ec_ruc`, `eg_tin`, `es_cif`, `eu_oss_vat`, `eu_vat`, `gb_vat`, `ge_vat`, `gn_nif`, `hk_br`, `hr_oib`, `hu_tin`, `id_npwp`, `il_vat`, `in_gst`, `is_vat`, `jp_cn`, `jp_rn`, `jp_trn`, `ke_pin`, `kh_tin`, `kr_brn`, `kz_bin`, `li_uid`, `li_vat`, `ma_vat`, `md_vat`, `me_pib`, `mk_vat`, `mr_nif`, `mx_rfc`, `my_frp`, `my_itn`, `my_sst`, `ng_tin`, `no_vat`, `no_voec`, `np_pan`, `nz_gst`, `om_vat`, `pe_ruc`, `ph_tin`, `ro_tin`, `rs_pib`, `ru_inn`, `ru_kpp`, `sa_vat`, `sg_gst`, `sg_uen`, `si_tin`, `sn_ninea`, `sr_fin`, `sv_nit`, `th_vat`, `tj_tin`, `tr_tin`, `tw_vat`, `tz_vat`, `ua_vat`, `ug_tin`, `us_ein`, `uy_ruc`, `uz_tin`, `uz_vat`, `ve_rif`, `vn_tin`, `za_vat`, `zm_tin`, or `zw_tin`
                 */
                export type Type =
                    | "ad_nrt"
                    | "ae_trn"
                    | "al_tin"
                    | "am_tin"
                    | "ao_tin"
                    | "ar_cuit"
                    | "au_abn"
                    | "au_arn"
                    | "ba_tin"
                    | "bb_tin"
                    | "bg_uic"
                    | "bh_vat"
                    | "bo_tin"
                    | "br_cnpj"
                    | "br_cpf"
                    | "bs_tin"
                    | "by_tin"
                    | "ca_bn"
                    | "ca_gst_hst"
                    | "ca_pst_bc"
                    | "ca_pst_mb"
                    | "ca_pst_sk"
                    | "ca_qst"
                    | "cd_nif"
                    | "ch_uid"
                    | "ch_vat"
                    | "cl_tin"
                    | "cn_tin"
                    | "co_nit"
                    | "cr_tin"
                    | "de_stn"
                    | "do_rcn"
                    | "ec_ruc"
                    | "eg_tin"
                    | "es_cif"
                    | "eu_oss_vat"
                    | "eu_vat"
                    | "gb_vat"
                    | "ge_vat"
                    | "gn_nif"
                    | "hk_br"
                    | "hr_oib"
                    | "hu_tin"
                    | "id_npwp"
                    | "il_vat"
                    | "in_gst"
                    | "is_vat"
                    | "jp_cn"
                    | "jp_rn"
                    | "jp_trn"
                    | "ke_pin"
                    | "kh_tin"
                    | "kr_brn"
                    | "kz_bin"
                    | "li_uid"
                    | "li_vat"
                    | "ma_vat"
                    | "md_vat"
                    | "me_pib"
                    | "mk_vat"
                    | "mr_nif"
                    | "mx_rfc"
                    | "my_frp"
                    | "my_itn"
                    | "my_sst"
                    | "ng_tin"
                    | "no_vat"
                    | "no_voec"
                    | "np_pan"
                    | "nz_gst"
                    | "om_vat"
                    | "pe_ruc"
                    | "ph_tin"
                    | "ro_tin"
                    | "rs_pib"
                    | "ru_inn"
                    | "ru_kpp"
                    | "sa_vat"
                    | "sg_gst"
                    | "sg_uen"
                    | "si_tin"
                    | "sn_ninea"
                    | "sr_fin"
                    | "sv_nit"
                    | "th_vat"
                    | "tj_tin"
                    | "tr_tin"
                    | "tw_vat"
                    | "tz_vat"
                    | "ua_vat"
                    | "ug_tin"
                    | "us_ein"
                    | "uy_ruc"
                    | "uz_tin"
                    | "uz_vat"
                    | "ve_rif"
                    | "vn_tin"
                    | "za_vat"
                    | "zm_tin"
                    | "zw_tin";
                export const Type = {
                    AdNrt: "ad_nrt",
                    AeTrn: "ae_trn",
                    AlTin: "al_tin",
                    AmTin: "am_tin",
                    AoTin: "ao_tin",
                    ArCuit: "ar_cuit",
                    AuAbn: "au_abn",
                    AuArn: "au_arn",
                    BaTin: "ba_tin",
                    BbTin: "bb_tin",
                    BgUic: "bg_uic",
                    BhVat: "bh_vat",
                    BoTin: "bo_tin",
                    BrCnpj: "br_cnpj",
                    BrCpf: "br_cpf",
                    BsTin: "bs_tin",
                    ByTin: "by_tin",
                    CaBn: "ca_bn",
                    CaGstHst: "ca_gst_hst",
                    CaPstBc: "ca_pst_bc",
                    CaPstMb: "ca_pst_mb",
                    CaPstSk: "ca_pst_sk",
                    CaQst: "ca_qst",
                    CdNif: "cd_nif",
                    ChUid: "ch_uid",
                    ChVat: "ch_vat",
                    ClTin: "cl_tin",
                    CnTin: "cn_tin",
                    CoNit: "co_nit",
                    CrTin: "cr_tin",
                    DeStn: "de_stn",
                    DoRcn: "do_rcn",
                    EcRuc: "ec_ruc",
                    EgTin: "eg_tin",
                    EsCif: "es_cif",
                    EuOssVat: "eu_oss_vat",
                    EuVat: "eu_vat",
                    GbVat: "gb_vat",
                    GeVat: "ge_vat",
                    GnNif: "gn_nif",
                    HkBr: "hk_br",
                    HrOib: "hr_oib",
                    HuTin: "hu_tin",
                    IdNpwp: "id_npwp",
                    IlVat: "il_vat",
                    InGst: "in_gst",
                    IsVat: "is_vat",
                    JpCn: "jp_cn",
                    JpRn: "jp_rn",
                    JpTrn: "jp_trn",
                    KePin: "ke_pin",
                    KhTin: "kh_tin",
                    KrBrn: "kr_brn",
                    KzBin: "kz_bin",
                    LiUid: "li_uid",
                    LiVat: "li_vat",
                    MaVat: "ma_vat",
                    MdVat: "md_vat",
                    MePib: "me_pib",
                    MkVat: "mk_vat",
                    MrNif: "mr_nif",
                    MxRfc: "mx_rfc",
                    MyFrp: "my_frp",
                    MyItn: "my_itn",
                    MySst: "my_sst",
                    NgTin: "ng_tin",
                    NoVat: "no_vat",
                    NoVoec: "no_voec",
                    NpPan: "np_pan",
                    NzGst: "nz_gst",
                    OmVat: "om_vat",
                    PeRuc: "pe_ruc",
                    PhTin: "ph_tin",
                    RoTin: "ro_tin",
                    RsPib: "rs_pib",
                    RuInn: "ru_inn",
                    RuKpp: "ru_kpp",
                    SaVat: "sa_vat",
                    SgGst: "sg_gst",
                    SgUen: "sg_uen",
                    SiTin: "si_tin",
                    SnNinea: "sn_ninea",
                    SrFin: "sr_fin",
                    SvNit: "sv_nit",
                    ThVat: "th_vat",
                    TjTin: "tj_tin",
                    TrTin: "tr_tin",
                    TwVat: "tw_vat",
                    TzVat: "tz_vat",
                    UaVat: "ua_vat",
                    UgTin: "ug_tin",
                    UsEin: "us_ein",
                    UyRuc: "uy_ruc",
                    UzTin: "uz_tin",
                    UzVat: "uz_vat",
                    VeRif: "ve_rif",
                    VnTin: "vn_tin",
                    ZaVat: "za_vat",
                    ZmTin: "zm_tin",
                    ZwTin: "zw_tin",
                } as const;
            }
        }

        /**
         * Overrides the tax calculation result to allow you to not collect tax from your customer. Use this if you've manually checked your customer's tax exemptions. Prefer providing the customer's `tax_ids` where possible, which automatically determines whether `reverse_charge` applies.
         */
        export type TaxabilityOverride = "customer_exempt" | "none" | "reverse_charge";
        export const TaxabilityOverride = {
            CustomerExempt: "customer_exempt",
            None: "none",
            ReverseCharge: "reverse_charge",
        } as const;
    }

    export type LineItems = LineItems.Item[];

    export namespace LineItems {
        export interface Item {
            /**
             * A positive integer representing the line item's total price in the [smallest currency unit](https://stripe.com/docs/currencies#zero-decimal).
             * If `tax_behavior=inclusive`, then this amount includes taxes. Otherwise, taxes are calculated on top of this amount.
             */
            amount: number;
            /** If provided, the product's `tax_code` will be used as the line item's `tax_code`. */
            product?: string;
            /** The number of units of the item being purchased. Used to calculate the per-unit price from the total `amount` for the line. For example, if `amount=100` and `quantity=4`, the calculated unit price is 25. */
            quantity?: number;
            /** A custom identifier for this line item, which must be unique across the line items in the calculation. The reference helps identify each line item in exported [tax reports](https://stripe.com/docs/tax/reports). */
            reference?: string;
            /** Specifies whether the `amount` includes taxes. Defaults to `exclusive`. */
            tax_behavior?: Item.TaxBehavior;
            /** A [tax code](https://stripe.com/docs/tax/tax-categories) ID to use for this line item. If not provided, we will use the tax code from the provided `product` param. If neither `tax_code` nor `product` is provided, we will use the default tax code from your Tax Settings. */
            tax_code?: string;
        }

        export namespace Item {
            /**
             * Specifies whether the `amount` includes taxes. Defaults to `exclusive`.
             */
            export type TaxBehavior = "exclusive" | "inclusive";
            export const TaxBehavior = {
                Exclusive: "exclusive",
                Inclusive: "inclusive",
            } as const;
        }
    }

    /**
     * Details about the address from which the goods are being shipped.
     */
    export interface ShipFromDetails {
        /** The address from which the goods are being shipped from. */
        address: ShipFromDetails.Address;
    }

    export namespace ShipFromDetails {
        /**
         * The address from which the goods are being shipped from.
         */
        export interface Address {
            /** City, district, suburb, town, or village. */
            city?: Address.City;
            /** Two-letter country code ([ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)). */
            country: string;
            /** Address line 1 (e.g., street, PO Box, or company name). */
            line1?: Address.Line1;
            /** Address line 2 (e.g., apartment, suite, unit, or building). */
            line2?: Address.Line2;
            /** ZIP or postal code. */
            postal_code?: Address.PostalCode;
            /** State/province as an [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) subdivision code, without country prefix. Example: "NY" or "TX". */
            state?: Address.State;
        }

        export namespace Address {
            /**
             * City, district, suburb, town, or village.
             */
            export type City = string | "";
            /**
             * Address line 1 (e.g., street, PO Box, or company name).
             */
            export type Line1 = string | "";
            /**
             * Address line 2 (e.g., apartment, suite, unit, or building).
             */
            export type Line2 = string | "";
            /**
             * ZIP or postal code.
             */
            export type PostalCode = string | "";
            /**
             * State/province as an [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) subdivision code, without country prefix. Example: "NY" or "TX".
             */
            export type State = string | "";
        }
    }

    /**
     * Shipping cost details to be used for the calculation.
     */
    export interface ShippingCost {
        /** A positive integer in the [smallest currency unit](https://stripe.com/docs/currencies#zero-decimal) representing the shipping charge. If `tax_behavior=inclusive`, then this amount includes taxes. Otherwise, taxes are calculated on top of this amount. */
        amount?: number;
        /** If provided, the [shipping rate](https://stripe.com/docs/api/shipping_rates/object)'s `amount`, `tax_code` and `tax_behavior` are used. If you provide a shipping rate, then you cannot pass the `amount`, `tax_code`, or `tax_behavior` parameters. */
        shipping_rate?: string;
        /** Specifies whether the `amount` includes taxes. If `tax_behavior=inclusive`, then the amount includes taxes. Defaults to `exclusive`. */
        tax_behavior?: ShippingCost.TaxBehavior;
        /** The [tax code](https://stripe.com/docs/tax/tax-categories) used to calculate tax on shipping. If not provided, the default shipping tax code from your [Tax Settings](https://dashboard.stripe.com/settings/tax) is used. */
        tax_code?: string;
    }

    export namespace ShippingCost {
        /**
         * Specifies whether the `amount` includes taxes. If `tax_behavior=inclusive`, then the amount includes taxes. Defaults to `exclusive`.
         */
        export type TaxBehavior = "exclusive" | "inclusive";
        export const TaxBehavior = {
            Exclusive: "exclusive",
            Inclusive: "inclusive",
        } as const;
    }
}
